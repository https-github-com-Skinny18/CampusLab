{% load static %}
{% include 'parciais/head.html'%}
<style>
    .form-check-label {
        margin-left: 10px;
    }
</style>

<body>
    {% include 'parciais/navbar.html'%}
    <form action="{% url 'editar_laboratorio' laboratorio_id=laboratorio.id imagem_id=0 %}" method="POST"
        enctype="multipart/form-data">
        {% csrf_token %}


        <div class="container">
            <div class="row justify-content-center p-4 ">
                {% include 'parciais/ferramentas.html'%}

                <section class=" rounded" id="formulario_autoridade">

                    <div class="row gap-1" id="endereco-tab">

                        <h5 class="titulo">Laboratório </h5>


                        <input class="form-control" placeholder="Nome do laboratório" name="nome_laboratorio"
                            value="{{ laboratorio.nome_laboratorio|default_if_none:'' }}">
                        <input class="form-control" placeholder="Responsável pelo laboratório" name="responsavel"
                            value="{{ laboratorio.responsavel|default_if_none:'' }}">
                        <input class="form-control" placeholder="E-mail" name="email"
                            value="{{ laboratorio.email|default_if_none:'' }}">
                        <input class="form-control" placeholder="Telefone" name="telefone"
                            value="{{ laboratorio.telefone|default_if_none:'' }}">

                    
                        
                        <textarea rows="3" class="form-control" placeholder="Apresentação geral do laboratório"
                            name="apresentacao">{{ laboratorio.apresentacao|default_if_none:'' }}</textarea>
                        <textarea rows="3" class="form-control" placeholder="Objetivos do laboratório"
                            name="objetivos">{{ laboratorio.objetivos|default_if_none:'' }}</textarea>
                        <textarea rows="3" class="form-control"
                            placeholder="Descrição das atividades de pesquisa e ensino"
                            name="descricao">{{ laboratorio.descricao|default_if_none:'' }}</textarea>
                        <input class="form-control" placeholder="Link do PNIPe" name="link_pnipe"
                            value="{{ laboratorio.link_pnipe|default_if_none:'' }}">
                        <!-- Preencha os outros campos de acordo com o objeto laboratorio -->
                        <h5 class="titulo">Imagens do Laboratório</h5>

                        <!-- Campo de entrada de arquivo para adicionar uma nova imagem -->
                        <input type="file" name="imagem_laboratorio" accept="image/*" class="form-control mb-3">

                        <!-- Lista das imagens existentes com opções para excluir -->
                        <ul class="list-group mb-3">
                            {% for imagem in laboratorio.imagens.all %}
                            <li class="list-group-item">
                                <!-- Exibe a imagem associada ao laboratório -->
                                <img src="{{ imagem.imagem.url }}" alt="Imagem do Laboratório" width="100">
                                <span class="float-right">
                                    <a href="{% url 'editar_laboratorio' laboratorio_id=laboratorio.id imagem_id=imagem.id %}"
                                        class="btn btn-danger btn-sm"
                                        onclick="return confirm('Deseja realmente excluir esta imagem?')">Excluir</a>
                                </span>
                            </li>
                            {% endfor %}
                        </ul>
                        <button id="botao_proximo" type="submit" class="btn btn-success float-right">
                            Salvar
                        </button>

                    </div>
                </section>
            </div>
        </div>
    </form>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

</body>